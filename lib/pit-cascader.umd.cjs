(function(i,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(i=typeof globalThis<"u"?globalThis:i||self,e(i["pit-cascader"]={},i.Vue))})(this,function(i,e){"use strict";function g(n){var d=Array.isArray(n)?[]:{};if(n&&typeof n=="object")for(let l in n)n.hasOwnProperty(l)&&(n[l]&&typeof n[l]=="object"?d[l]=g(n[l]):d[l]=n[l]);return d}const $="",w=(n,d)=>{const l=n.__vccOpts||n;for(const[h,k]of d)l[h]=k;return l},y=n=>(e.pushScopeId("data-v-6586336c"),n=n(),e.popScopeId(),n),V={key:0,class:"el-cascader-panel"},B={class:"el-scrollbar el-cascader-menu",role:"menu"},E={class:"el-cascader-menu__wrap el-scrollbar__wrap el-scrollbar__wrap--hidden-default"},C={class:"el-scrollbar__view el-cascader-menu__list",style:{}},b=["onClick"],x=y(()=>e.createElementVNode("i",{class:"el-icon arrow-right el-cascader-node__postfix"},[e.createElementVNode("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e.createElementVNode("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})])],-1)),N={class:"el-cascader-menu__wrap el-scrollbar__wrap el-scrollbar__wrap--hidden-default"},L={class:"el-scrollbar__view el-cascader-menu__list",style:{}},S=["onClick"],I={key:0,class:"el-icon arrow-right el-cascader-node__postfix"},P=[y(()=>e.createElementVNode("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[e.createElementVNode("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})],-1))],z={key:1,style:{"text-align":"center"}},M=w({__name:"app",props:{modelValue:String,props:{type:String,default:()=>({value:"value",label:"label",children:"children"})},options:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(n,{emit:d}){const l=n,h=e.ref("");let k=e.ref(1),f=e.reactive({});const O=o=>{let t=[];const a=(r,c,_="",p="")=>r.map(s=>(s.level=c,s.selected=!1,s.fullPath=_+(_?"/":"")+s[l.props.label],s.valuePath=_+(p?"/":"")+s[l.props.value],s[l.props.children]&&s[l.props.children].length&&(s.children=a(s[l.props.children],c+1,s.fullPath,s.valuePath)),s));return t=a(g(o),1),t};let u=e.ref(O(l.options));e.watch(()=>l.modelValue,o=>{const t=A(o),a=t?t.valuePath.split("/"):[];h.value=t?t[[l.props.label]]:"",F(a)},{immediate:!0});function A(o){let t=null;function a(r){for(let c=0;c<r.length;c++){if(o===r[c][l.props.value]){t=r[c];break}r[c][l.props.children]&&r[c][l.props.children].length&&a(r[c][l.props.children])}}return a(u.value),t}function F(o){const t=a=>a.map(r=>(r.selected=o.includes(r[l.props.value]),o.includes(r[l.props.value])&&r[l.props.children]&&r[l.props.children].length&&(f[r.level]=r[l.props.children]),r[l.props.children]&&r[l.props.children].length&&(r[l.props.children]=t(r[l.props.children])),r));u.value=t(u.value)}const T=(o,t)=>{h.value=o.fullPath,d("update:modelValue",t),d("change",t,o)},m=(o,t)=>{if(t.forEach(a=>{a.selected=!1}),o.selected=!0,o[l.props.children]&&o[l.props.children].length){k.value=o.level;for(let a in f)a>o.level&&delete f[a];f[o.level]=o[l.props.children]}else delete f[o.level],T(o,o[l.props.value])};return(o,t)=>{const a=e.resolveComponent("el-input"),r=e.resolveComponent("el-popover");return e.openBlock(),e.createBlock(r,{placement:"bottom",title:"",width:"auto",trigger:"click",style:{position:"relative"}},{reference:e.withCtx(()=>[e.createVNode(a,e.mergeProps({modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=c=>h.value=c),readonly:"",class:"m-2"},o.$attrs),null,16,["modelValue"])]),default:e.withCtx(()=>[n.options.length?(e.openBlock(),e.createElementBlock("div",V,[e.createElementVNode("div",B,[e.createElementVNode("div",E,[e.createElementVNode("ul",C,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),(c,_)=>(e.openBlock(),e.createElementBlock("li",{tabindex:"-1",class:"el-cascader-node",key:_,onClick:p=>m(c,e.unref(u))},[e.createElementVNode("span",{class:e.normalizeClass(["el-cascader-node__label",["el-cascader-node__label",c.selected?"selected":""]])},e.toDisplayString(c[[l.props.label]]),3),x],8,b))),128))])])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(f),(c,_)=>(e.openBlock(),e.createElementBlock("div",{class:"el-scrollbar el-cascader-menu",role:"menu",key:_},[e.createElementVNode("div",N,[e.createElementVNode("ul",L,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c,(p,s)=>(e.openBlock(),e.createElementBlock("li",{tabindex:"-1",class:"el-cascader-node",key:s,onClick:U=>m(p,c)},[e.createElementVNode("span",{class:e.normalizeClass(["el-cascader-node__label",p.selected?"selected":""])},e.toDisplayString(p[[l.props.label]]),3),p[l.props.children]&&p[l.props.children].length?(e.openBlock(),e.createElementBlock("i",I,P)):e.createCommentVNode("",!0)],8,S))),128))])])]))),128))])):(e.openBlock(),e.createElementBlock("div",z,"无数据"))]),_:1})}}},[["__scopeId","data-v-6586336c"]]);i.Cascader=M,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
